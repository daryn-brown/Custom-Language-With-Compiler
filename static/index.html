<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QuickTix</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap"
    />
    <style>
      :root {
        --bg-darker: #121b29;
        --bg-dark: #1e2736;
        --text-white: #ffffff;
        --text-gray: #abb2bf;
        --blue: #2d91f0;
        --command: #1da4eb;
        --keyword: #c678dd;
        --string: #e7d85b;
        --number: #2d91f0;
        --output: #44d158;
        --border-color: #2a3343;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        background-color: var(--bg-darker);
        color: var(--text-white);
        font-family: "Inter", sans-serif;
        line-height: 1.6;
      }

      /* Scrollbar styling */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }

      ::-webkit-scrollbar-track {
        background: var(--bg-darker);
      }

      ::-webkit-scrollbar-thumb {
        background: #4a5568;
        border-radius: 9999px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: #718096;
      }

      .header {
        background-color: var(--bg-dark);
        border-bottom: 1px solid var(--border-color);
        padding: 1rem;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
      }

      .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .logo-icon {
        color: var(--blue);
        font-size: 1.5rem;
      }

      .logo-text {
        font-size: 1.25rem;
        font-weight: 600;
      }

      .nav {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .nav-button {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        background-color: transparent;
        color: var(--text-gray);
        border: none;
        padding: 0.5rem 0.75rem;
        border-radius: 0.375rem;
        font-size: 0.875rem;
        font-family: "Inter", sans-serif;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .nav-button:hover {
        background-color: rgba(255, 255, 255, 0.1);
        color: var(--text-white);
      }

      .nav-button.active {
        background-color: var(--bg-darker);
        color: var(--text-white);
      }

      .main {
        padding: 1.5rem;
      }

      .content {
        max-width: 900px;
        margin: 0 auto;
      }

      .home h1 {
        font-size: 2rem;
        margin-bottom: 1rem;
        text-align: center;
      }

      .home p {
        margin-bottom: 1rem;
        color: var(--text-gray);
      }

      .home p strong {
        color: var(--blue);
      }

      .home ul {
        margin-bottom: 1.5rem;
        margin-left: 1.5rem;
      }

      .home li {
        margin-bottom: 0.5rem;
        color: var(--text-gray);
      }

      .section {
        margin-top: 2.5rem;
      }

      .section h2 {
        font-size: 1.5rem;
        margin-bottom: 1rem;
        font-weight: 700;
      }

      .section p {
        margin-bottom: 1.5rem;
      }

      .command-cards {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1.5rem;
        margin-top: 1.5rem;
      }

      .command-card {
        background-color: var(--bg-dark);
        border: 1px solid var(--border-color);
        border-radius: 0.5rem;
        overflow: hidden;
      }

      .command-card-header {
        padding: 0.75rem 1rem;
        border-bottom: 1px solid var(--border-color);
      }

      .command-card-title {
        font-size: 1rem;
        font-weight: 600;
      }

      .command-card-body {
        padding: 0.75rem 1rem;
      }

      .command-code {
        background-color: var(--bg-darker);
        border-radius: 0.375rem;
        padding: 0.75rem;
        font-family: "Fira Code", monospace;
        font-size: 0.875rem;
        white-space: nowrap;
        color: var(--text-white);
        line-height: 1;
        overflow-x: auto;
      }

      .terminal {
        display: flex;
        flex-direction: column;
      }

      .terminal-container {
        display: flex;
        justify-content: center;
        max-width: 800px;
        margin: 0 auto;
        height: 700px;
      }

      @media (max-width: 768px) {
        .terminal-container {
          height: 500px;
        }
      }

      .terminal-panel {
        width: 100%;
        background-color: var(--bg-dark);
        border-radius: 0.5rem;
        overflow: hidden;
        border: 1px solid var(--border-color);
        display: flex;
        flex-direction: column;
      }

      .terminal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5rem 0.75rem;
        background-color: var(--bg-darker);
        border-bottom: 1px solid var(--border-color);
      }

      .terminal-controls {
        display: flex;
        gap: 0.375rem;
      }

      .terminal-dot {
        width: 0.75rem;
        height: 0.75rem;
        border-radius: 50%;
      }

      .terminal-dot-red {
        background-color: #ff5f56;
      }

      .terminal-dot-yellow {
        background-color: #ffbd2e;
      }

      .terminal-dot-green {
        background-color: #27c93f;
      }

      .terminal-title {
        font-size: 0.875rem;
        color: var(--text-gray);
      }

      .terminal-clear {
        background: transparent;
        color: var(--text-gray);
        border: none;
        font-size: 0.875rem;
        cursor: pointer;
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
      }

      .terminal-clear:hover {
        background-color: rgba(255, 255, 255, 0.1);
        color: var(--text-white);
      }

      .terminal-output {
        flex: 1;
        padding: 1rem;
        overflow-y: auto;
        font-family: "Fira Code", monospace;
        font-size: 0.875rem;
        height: calc(100% - 80px); /* Adjust for header and input container */
        background-color: var(--bg-dark);
      }

      .terminal-output-line {
        margin: 0.375rem 0;
        white-space: pre-wrap;
      }

      .terminal-output-command {
        color: var(--blue);
        text-align: right;
      }

      .terminal-output-response {
        color: var(--output);
        text-align: left;
      }

      .terminal-input-area {
        display: flex;
        padding: 1rem;
        gap: 10px;
      }

      .terminal-input {
        flex: 1;
        background-color: var(--bg-darker);
        border: 1px solid var(--border-color);
        border-radius: 0.375rem;
        color: var(--text-white);
        padding: 0.75rem;
        font-family: "Fira Code", monospace;
        font-size: 0.875rem;
        outline: none;
      }

      .terminal-input:focus {
        border-color: var(--blue);
      }

      .terminal-input::placeholder {
        color: #4a5568;
      }

      .terminal-run-button {
        display: flex;
        align-items: center;
        gap: 0.25rem;
        background-color: var(--blue);
        color: var(--text-white);
        border: none;
        border-radius: 0.375rem;
        padding: 0.75rem 1rem;
        font-size: 0.875rem;
        font-weight: 500;
        cursor: pointer;
        transition: background-color 0.2s;
      }

      .terminal-run-button:hover {
        background-color: #2574c2;
      }

      /* Syntax highlighting classes */
      .keyword {
        color: var(--keyword);
      }

      .command {
        color: var(--command);
      }

      .string {
        color: var(--string);
      }

      .number {
        color: var(--number);
      }

      @media (max-width: 640px) {
        .command-cards {
          grid-template-columns: 1fr;
        }

        .terminal-input-area {
          flex-direction: column;
        }

        .terminal-run-button {
          align-self: flex-end;
        }
      }

      .active {
        display: block;
      }

      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <header class="header">
      <div class="container">
        <div class="header-content">
          <div class="logo">
            <span class="logo-icon">‚å®Ô∏è</span>
            <h1 class="logo-text">QuickTix</h1>
          </div>

          <nav class="nav">
            <button
              class="nav-button active"
              id="home-btn"
              onclick="showHome()"
            >
              <span>üè†</span>
              <span>Home</span>
            </button>

            <button
              class="nav-button"
              id="terminal-btn"
              onclick="showTerminal()"
            >
              <span>üíª</span>
              <span>Terminal</span>
            </button>
          </nav>
        </div>
      </div>
    </header>

    <main class="main">
      <div class="container">
        <!-- Home page section -->
        <div id="home" class="content home active">
          <h1>Welcome to QuickTix</h1>
          <p>
            QuickTix is your terminal-style booking platform powered by
            <strong>SadeScript</strong>
          </p>

          <div class="command-card">
            <div class="command-card-header">
              <h3 class="command-card-title">About QuickTix</h3>
            </div>
            <div class="command-card-body">
              <p>
                Use our custom command language <strong>SadeScript</strong> to:
              </p>
              <ul>
                <li>Add concert, bus, movie, or flight tickets</li>
                <li>Book, pay, cancel, or confirm reservations</li>
                <li>Update available ticket counts</li>
                <li>And more... all in one line!</li>
              </ul>
            </div>
          </div>

          <section id="docs" class="section">
            <h2>üìò Getting Started with SadeScript</h2>
            <p>
              Use SadeScript to book and manage tickets using simple
              command-line syntax.
            </p>

            <div class="command-cards">
              <div class="command-card">
                <div class="command-card-header">
                  <h3 class="command-card-title">üÜï Add a Ticket</h3>
                </div>
                <div class="command-card-body">
                  <div class="command-code">
                    <span class="keyword">ADD</span>
                    <span class="keyword">BUS</span>
                    <span class="string">"Kingston to Montego Bay"</span>
                    <span class="keyword">AT</span>
                    <span class="string">"Bus Terminal"</span>
                    <span class="keyword">IN</span>
                    <span class="string">"Kingston"</span>
                    <span class="keyword">FROM</span>
                    <span class="number">2025-06-01</span>
                    <span class="keyword">TO</span>
                    <span class="number">2025-06-01</span>
                    <span class="keyword">PRICE</span>
                    <span class="number">20</span>
                    <span class="keyword">TO</span>
                    <span class="number">40</span>
                  </div>
                  <div class="command-code" style="margin-top: 10px">
                    <span class="keyword">ADD</span>
                    <span class="keyword">CONCERT</span>
                    <span class="string">"Mello Vibes"</span>
                    <span class="keyword">AT</span>
                    <span class="string">"Sabina Park"</span>
                    <span class="keyword">IN</span>
                    <span class="string">"Kingston"</span>
                    <span class="keyword">FROM</span>
                    <span class="number">2025-04-20</span>
                    <span class="keyword">TO</span>
                    <span class="number">2025-04-21</span>
                    <span class="keyword">PRICE</span>
                    <span class="number">50</span>
                    <span class="keyword">TO</span>
                    <span class="number">80</span>
                  </div>
                </div>
              </div>

              <div class="command-card">
                <div class="command-card-header">
                  <h3 class="command-card-title">
                    üìç List Tickets in a Location
                  </h3>
                </div>
                <div class="command-card-body">
                  <div class="command-code">
                    <span class="keyword">LIST</span>
                    <span class="keyword">EVENTS</span>
                    <span class="keyword">IN</span>
                    <span class="string">"Kingston"</span>
                  </div>
                </div>
              </div>

              <div class="command-card">
                <div class="command-card-header">
                  <h3 class="command-card-title">üéüÔ∏è Book a Ticket</h3>
                </div>
                <div class="command-card-body">
                  <div class="command-code">
                    <span class="keyword">BOOK</span>
                    <span class="string">"Mello Vibes"</span>
                    <span class="keyword">ON</span>
                    <span class="number">2025-04-20</span>
                    <span class="keyword">FOR</span>
                    <span class="string">"John Doe"</span>
                  </div>
                </div>
              </div>

              <div class="command-card">
                <div class="command-card-header">
                  <h3 class="command-card-title">‚úÖ Confirm a Booking</h3>
                </div>
                <div class="command-card-body">
                  <div class="command-code">
                    <span class="keyword">CONFIRM</span>
                    <span class="keyword">BOOKING</span>
                    <span class="number">1001</span>
                  </div>
                </div>
              </div>

              <div class="command-card">
                <div class="command-card-header">
                  <h3 class="command-card-title">üí≥ Pay for a Booking</h3>
                </div>
                <div class="command-card-body">
                  <div class="command-code">
                    <span class="keyword">PAY</span>
                    <span class="keyword">FOR</span>
                    <span class="keyword">BOOKING</span>
                    <span class="number">1001</span>
                  </div>
                </div>
              </div>

              <div class="command-card">
                <div class="command-card-header">
                  <h3 class="command-card-title">‚ùå Cancel a Booking</h3>
                </div>
                <div class="command-card-body">
                  <div class="command-code">
                    <span class="keyword">CANCEL</span>
                    <span class="keyword">BOOKING</span>
                    <span class="number">1001</span>
                  </div>
                </div>
              </div>

              <div class="command-card">
                <div class="command-card-header">
                  <h3 class="command-card-title">
                    üîÑ Update Ticket Availability
                  </h3>
                </div>
                <div class="command-card-body">
                  <div class="command-code">
                    <span class="keyword">UPDATE</span>
                    <span class="keyword">EVENT</span>
                    <span class="string">"Mello Vibes"</span>
                    <span class="keyword">WITH</span>
                    <span class="number">20</span>
                    <span class="keyword">NEW</span>
                    <span class="keyword">TICKETS</span>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>

        <!-- Terminal CLI section -->
        <div id="terminal" class="content terminal hidden">
          <div class="terminal-container">
            <div class="terminal-panel">
              <div class="terminal-header">
                <div class="terminal-controls">
                  <div class="terminal-dot terminal-dot-red"></div>
                  <div class="terminal-dot terminal-dot-yellow"></div>
                  <div class="terminal-dot terminal-dot-green"></div>
                </div>
                <span class="terminal-title">Output</span>
                <button class="terminal-clear" onclick="clearTerminal()">
                  Clear
                </button>
              </div>
              <div id="output" class="terminal-output"></div>
              <div class="terminal-input-area">
                <input
                  id="input"
                  class="terminal-input"
                  placeholder="Enter command..."
                  autocomplete="off"
                  autofocus
                />
                <button id="sendBtn" class="terminal-run-button">Send</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script>
      function showHome() {
        document.getElementById("home").classList.remove("hidden");
        document.getElementById("home").classList.add("active");
        document.getElementById("terminal").classList.add("hidden");
        document.getElementById("terminal").classList.remove("active");
        document.getElementById("home-btn").classList.add("active");
        document.getElementById("terminal-btn").classList.remove("active");
      }

      function showTerminal() {
        document.getElementById("terminal").classList.remove("hidden");
        document.getElementById("terminal").classList.add("active");
        document.getElementById("home").classList.add("hidden");
        document.getElementById("home").classList.remove("active");
        document.getElementById("terminal-btn").classList.add("active");
        document.getElementById("home-btn").classList.remove("active");
        document.getElementById("input").focus();
      }

      const input = document.getElementById("input");
      const output = document.getElementById("output");

      document.getElementById("sendBtn").addEventListener("click", sendCommand);

      function sendCommand() {
        const command = input.value.replace(/[""]/g, '"').replace(/['']/g, "'");

        if (command.trim() === "") return;

        appendToOutput(`>> ${command}`, true);
        input.value = "";

        // Added the fetch call from the original file to ensure backend connection works
        fetch("/run", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ command }),
        })
          .then((res) => res.text())
          .then((data) => appendToOutput(data))
          .catch((error) => appendToOutput(`Error: ${error.message}`));
      }

      input.addEventListener("keydown", function (e) {
        if (e.key === "Enter") {
          sendCommand();
        }
      });

      function appendToOutput(text, isCommand = false) {
        const line = document.createElement("div");
        line.className = `terminal-output-line ${
          isCommand ? "terminal-output-command" : "terminal-output-response"
        }`;

        if (isCommand) {
          line.innerHTML = `‚ùØ ${highlightCommand(text)}`;
        } else {
          line.textContent = text;
        }

        output.appendChild(line);
        output.scrollTop = output.scrollHeight;
      }

      function highlightCommand(text) {
        return text
          .replace(
            /(ADD|BOOK|CANCEL|CONFIRM|LIST|PAY|UPDATE|BUS|CONCERT|EVENTS|EVENT|BOOKING|NEW|TICKETS|FOR|FROM|IN|ON|PRICE|TO|WITH|AT)/g,
            '<span class="keyword">$1</span>'
          )
          .replace(/("[^"]*")/g, '<span class="string">$1</span>')
          .replace(/(\d+(?:-\d+)?)/g, '<span class="number">$1</span>');
      }

      function clearTerminal() {
        output.innerHTML = "";
        appendToOutput("Terminal cleared.");
        appendToOutput("Type your SadeScript commands below:");
      }

      // Initialize the terminal with welcome message
      window.onload = function () {
        appendToOutput("Welcome to QuickTix Terminal v1.0.0");
        appendToOutput("Type your SadeScript commands below:");
      };
    </script>
  </body>
</html>
